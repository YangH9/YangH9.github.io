import{B as e}from"./chunk-CZOa9Zwk.js";import{f as t,g as a,j as i,a as l,w as n,d as c,r,o as u,l as s,_ as o}from"./index-BtUCRZXV.js";const d={class:"container"},f="30px SanFrancisco",v=o({__name:"picture-in-picture",setup(o){let v={},h="",m="";const p=t(""),y=t(""),g=t(""),x=()=>{const e=(new Date).toFormat(),{width:t,height:a}=v;if(h.clearRect(0,0,t,a),h.fillStyle="#fff",h.fillRect(0,0,t,a),h.fillStyle="#000",h.font=f,h.beginPath(),h.fillText(e,t/2,a/2+10),m!==e){m=e;try{y.value.srcObject=p.value.captureStream()}catch(i){}}window.requestAnimationFrame(x)},_=()=>{if(document.pictureInPictureEnabled&&!y.value.disablePictureInPicture)try{document.pictureInPictureElement&&document.exitPictureInPicture(),y.value.requestPictureInPicture()}catch(e){}};return a((()=>{g.value.style.font=f,g.value.style.padding="14px",g.value.innerHTML="0000/00/00 00:00:00",v=g.value.getBoundingClientRect(),(()=>{const{width:e,height:t}=v;p.value.width=e,p.value.height=t,y.value.width=e,y.value.height=t,h=p.value.getContext("2d"),h.textAlign="center",h.textBaseline="middle",h.lineWidth=5,x()})()})),(t,a)=>{const o=r("a-button"),f=r("a-card");return u(),i("div",d,[l(e,{overlayShow:""}),l(f,{title:"画中画",class:"mb_2",hoverable:!0},{default:n((()=>[c("canvas",{ref_key:"canvas",ref:p},"不支持canvas",512),c("video",{ref_key:"video",ref:y,autoplay:""},null,512),c("div",null,[l(o,{onClick:_},{default:n((()=>[s("开启画中画")])),_:1})])])),_:1}),c("span",{ref_key:"textWidth",ref:g,class:"textWidth"},null,512)])}}},[["__scopeId","data-v-57d577a9"]]);export{v as default};
