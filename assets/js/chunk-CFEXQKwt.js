import{B as n}from"./chunk-BZWKAqeX.js";import{D as e,T as t,U as o,r as i,S as r,g as a,h as l,V as u,W as s,X as c,j as d,b as f,d as p,c as m,w as v,a as g,o as y,u as h,f as b,_ as C}from"./index-Bx-KHl3S.js";var S,w=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCommentChange","onCompositionEnd","onCompositionStart","onCompositionUpdate","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],j=function(n){return-1!==w.map((function(n){return n.toLowerCase()})).indexOf(n.toLowerCase())},D=function(n,t,o,i,r,a){i.setContent(a()),o.attrs["onUpdate:modelValue"]&&function(n,t,o,i){var r=n.modelEvents?n.modelEvents:null,a=Array.isArray(r)?r.join(" "):r;e(i,(function(e,t){o&&"string"==typeof e&&e!==t&&e!==o.getContent({format:n.outputFormat})&&o.setContent(e)})),o.on(a||"change input undo redo",(function(){t.emit("update:modelValue",o.getContent({format:n.outputFormat}))}))}(t,o,i,r),function(n,e,t){Object.keys(e).filter(j).forEach((function(o){var i=e[o];"function"==typeof i&&("onInit"===o?i(n,t):t.on(o.substring(2),(function(n){return i(n,t)})))}))}(n,o.attrs,i)},E=0,k=function(n){var e=Date.now();return n+"_"+Math.floor(1e9*Math.random())+ ++E+String(e)},x=function(n){return void 0===n||""===n?[]:Array.isArray(n)?n:n.split(" ")},M=function(){return{listeners:[],scriptId:k("tiny-script"),scriptLoaded:!1}},O=(S=M(),{load:function(n,e,t){S.scriptLoaded?t():(S.listeners.push(t),n.getElementById(S.scriptId)||function(n,e,t,o){var i=e.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=n,i.src=t;var r=function(){i.removeEventListener("load",r),o()};i.addEventListener("load",r),e.head&&e.head.appendChild(i)}(S.scriptId,n,e,(function(){S.listeners.forEach((function(n){return n()})),S.scriptLoaded=!0})))},reinitialize:function(){S=M()}}),A=function(){var n="undefined"!=typeof window?window:global;return n&&n.tinymce?n.tinymce:null},B={apiKey:String,licenseKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(n){return"html"===n||"text"===n}}},P=function(){return P=Object.assign||function(n){for(var e,t=1,o=arguments.length;t<o;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},P.apply(this,arguments)},U={selector:void 0,target:void 0},I=t({props:B,setup:function(n,t){var d=n.init?P(P({},n.init),U):P({},U),f=o(n),p=f.disabled,m=f.modelValue,v=f.tagName,g=i(null),y=null,h=n.id||k("tiny-vue"),b=n.init&&n.init.inline||n.inline,C=!!t.attrs["onUpdate:modelValue"],S=!0,w=n.initialValue?n.initialValue:"",j="",E=function(){var e,o,i,r=(e=S,C?function(){return(null==m?void 0:m.value)?m.value:""}:function(){return e?w:j}),a=P(P({},d),{readonly:n.disabled,target:g.value,plugins:(o=d.plugins,i=n.plugins,x(o).concat(x(i))),toolbar:n.toolbar||d.toolbar,inline:b,setup:function(e){y=e,e.on("init",(function(o){return D(o,n,t,e,m,r)})),"function"==typeof d.setup&&d.setup(e)}});(function(n){return null!==n&&"textarea"===n.tagName.toLowerCase()})(g.value)&&(g.value.style.visibility=""),A().init(a),S=!1};e(p,(function(n){var e;null!==y&&("function"==typeof(null===(e=y.mode)||void 0===e?void 0:e.set)?y.mode.set(n?"readonly":"design"):y.setMode(n?"readonly":"design"))})),e(v,(function(n){var e;C||(j=y.getContent()),null===(e=A())||void 0===e||e.remove(y),r((function(){return E()}))})),a((function(){if(null!==A())E();else if(g.value&&g.value.ownerDocument){var e=n.cloudChannel?n.cloudChannel:"7",t=n.apiKey?n.apiKey:"no-api-key",o=null==n.tinymceScriptSrc?"https://cdn.tiny.cloud/1/".concat(t,"/tinymce/").concat(e,"/tinymce.min.js"):n.tinymceScriptSrc;O.load(g.value.ownerDocument,o,E)}})),l((function(){null!==A()&&A().remove(y)})),b||(u((function(){S||E()})),s((function(){var n;C||(j=y.getContent()),null===(n=A())||void 0===n||n.remove(y)})));return t.expose({rerender:function(n){var e;j=y.getContent(),null===(e=A())||void 0===e||e.remove(y),d=P(P(P({},d),n),U),r((function(){return E()}))},getEditor:function(){return y}}),function(){return b?function(n,e,t,o){return n(o||"div",{id:e,ref:t})}(c,h,g,n.tagName):c("textarea",{id:h,visibility:"hidden",ref:g})}}});const L={class:"container"},V=C({__name:"richtext-tinymce",setup:e=>(e,t)=>{const o=g("a-card"),i=b("calcHeight");return y(),d("div",L,[f(n,{overlayShow:""}),p((y(),m(o,{title:"富文本-tinymce",hoverable:!0},{default:v((()=>[f(h(I),{"api-key":"rwwsrynbk8cqoox4n5ixrwqlovmjwgcjm4ia30pf4pav74b8",init:{branding:!1,plugins:["advlist","autolink","link","image","lists","charmap","preview","anchor","pagebreak","searchreplace","wordcount","visualblocks","visualchars","code","fullscreen","insertdatetime","media","table","emoticons","help"],toolbar:"undo redo | styles | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | print preview media fullscreen | forecolor backcolor emoticons | help",menu:{favs:{title:"自定义",items:"code visualaid | searchreplace | emoticons"}},menubar:"favs file edit view insert format tools table help",toolbar_mode:"sliding",language:"zh_CN",height:600},placeholder:"TinyMCE"})])),_:1})),[[i,{height:18,dom:".ant-card-body"}]])])}},[["__scopeId","data-v-ae2d5c43"]]);export{V as default};
