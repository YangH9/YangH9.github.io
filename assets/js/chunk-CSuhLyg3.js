import{B as a}from"./chunk-BZWKAqeX.js";import{p as l,z as e,j as t,b as r,w as d,i as u,a as n,o,F as i,l as s,K as c,G as y,_ as b}from"./index-Bx-KHl3S.js";const f={class:"container"};function v(a){return"function"==typeof a||"[object Object]"===Object.prototype.toString.call(a)&&!y(a)}const m=b({__name:"life-time",setup(y){const b=u("dayjs"),m=l({nowDay:b(),birthday:null,maxYear:80,degree:null,unit:12}),p=[{label:"出生",color:"#a1a1aa",year:3},{label:"幼儿园",color:"#dc2626",year:3},{label:"小学",color:"#fb923c",year:6},{label:"初中",color:"#facc15",year:3},{label:"高中",color:"#fb7185",year:3},{label:"大学专科",color:"#c084fc",year:3},{label:"大学本科",color:"#22d3ee",year:4},{label:"硕士",color:"#f472b6",year:3},{label:"博士",color:"#a3e635",year:4},{label:"平凡的一天",color:"#bbf7d0"},{label:"今天",color:"#0284c7"}],h={1:{value:1,day:[5],label:"专科"},2:{value:2,day:[6],label:"本科"},3:{value:3,day:[6,7],label:"硕士"},4:{value:4,day:[6,7,8],label:"博士"}},w={1:{value:1,day:365,label:"年",key:"year"},12:{value:12,day:30,label:"月",key:"month"},52:{value:52,day:7,label:"周",key:"week"},365:{value:365,day:1,label:"日",key:"day"}},Y=e((()=>b.min(m.nowDay,m.birthday))),k=e((()=>{const{nowDay:a,birthday:l,unit:e,degree:t}=m,r=Math.abs(Y.value.diff(a,w[e].key)),d=Math.abs(Y.value.diff(l,w[e].key)),u=p.filter(((a,l)=>{var e;return l<5||(null==(e=h[t])?void 0:e.day.includes(l))})).reduce(((a,l)=>{var t,r;return[...a,{...l,start:(null==(t=a.at(-1))?void 0:t.end)+1||0,end:((null==(r=a.at(-1))?void 0:r.end)||-1)+l.year*e}]}),[]);return u.push({...p.at(-2),start:u.at(-1).end,end:r-1}),u.push({...p.at(-1),start:r,end:r}),d&&(u.length=0,u[0]={...p.at(-1),start:r,end:r},u[1]={...p[0],start:d,end:d}),u})),g=()=>{let a,l,e,t;return r(i,null,[r(n("a-form"),{model:m},{default:()=>[r(n("a-row"),{gutter:24},{default:()=>[r(n("a-col"),{span:24,md:12},{default:()=>[r(n("a-form-item"),{label:"生日"},{default:()=>[r(n("a-date-picker"),{value:m.birthday,"onUpdate:value":a=>m.birthday=a,placeholder:"生日",class:"w_100"},null)]})]}),r(n("a-col"),{span:24,md:12},{default:()=>[r(n("a-form-item"),{label:"预计寿命"},{default:()=>[r(n("a-input-number"),{value:m.maxYear,"onUpdate:value":a=>m.maxYear=a,min:1,max:200,class:"w_100"},null)]})]}),r(n("a-col"),{span:24,md:12},{default:()=>[r(n("a-form-item"),{label:"最高学历"},{default:()=>[r(n("a-select"),{value:m.degree,"onUpdate:value":a=>m.degree=a,allowClear:!0,placeholder:"最高学历",class:"grow"},v(a=Object.values(h).map((a=>r(n("a-select-option"),{value:a.value},{default:()=>[a.label]}))))?a:{default:()=>[a]})]})]}),r(n("a-col"),{span:24,md:12},{default:()=>[r(n("a-form-item"),{label:"显示粒度",class:"grow"},{default:()=>[r(n("a-radio-group"),{value:m.unit,"onUpdate:value":a=>m.unit=a},v(l=Object.values(w).map((a=>r(n("a-radio"),{value:a.value},{default:()=>[a.label]}))))?l:{default:()=>[l]})]})]})]})]}),r(n("a-divider"),{class:"my_4"},null),r(n("a-space"),{align:"center",wrap:!0},v(e=p.map((a=>r("div",{class:"d_flex center gap_1"},[r("div",{style:{backgroundColor:a.color},class:"square"},null),a.label]))))?e:{default:()=>[e]}),m.birthday&&r(i,null,[r(n("a-divider"),{class:"my_4"},null),r(n("a-space"),{size:4,wrap:!0},{default:()=>[r("p",null,[s("你的生日："),m.birthday.format("YYYY-MM-DD")]),r("p",null,[s("预计寿命："),m.maxYear,s("岁")]),m.nowDay.diff(m.birthday,w[m.unit].key)>0?r(i,null,[r("p",null,[s("已经存活"),m.nowDay.diff(m.birthday,w[m.unit].key),w[m.unit].label]),r("p",null,[s("还剩"),m.birthday.add(m.maxYear,"year").diff(m.nowDay,w[m.unit].key),w[m.unit].label])]):r("p",null,[s("还有"),m.birthday.diff(m.nowDay,w[m.unit].key),w[m.unit].label,s("出生")]),r("p",null,[s("祝大家长命百岁")])]})]),m.maxYear?r(i,null,[r(n("a-divider"),{class:"my_4"},null),r(n("a-space"),{size:4,wrap:!0},v(t=Array.from({length:m.unit*m.maxYear},((a,l)=>{var e;const t=(l===k.value.at(-1).end?k.value.at(-1):l<k.value.at(-1).end?k.value.find((a=>a.start<=l&&a.end>=l)):null)||{},d=null==(e=Y.value)?void 0:e.add(l,w[m.unit].key),u={style:{backgroundColor:null==t?void 0:t.color},data:`${(null==t?void 0:t.label)||""} ${d.format("YYYY年MM月DD日")}`};return r(n("a-tooltip"),null,{default:()=>[r("div",c({class:"square"},u),null)],title:()=>`${(null==t?void 0:t.label)||""} ${d.format("YYYY年MM月DD日")}`})})))?t:{default:()=>[t]})]):""])};return(l,e)=>{const u=n("a-card");return o(),t("div",f,[r(a,{overlayShow:""}),r(u,{title:"人生进度表",hoverable:!0},{default:d((()=>[r(g)])),_:1})])}}},[["__scopeId","data-v-dd4ff83c"]]);export{m as default};
