import{B as e}from"./chunk-BnZYrWA2.js";import{f as t,p as a,j as s,a as l,b as n,c as o,w as i,r,o as u,d as m,t as d,v,F as c,k as g,e as h,q as y,s as D,_ as p}from"./index-CEbn-vAV.js";const b={class:"container"},L={class:"clock"},f=(e=>(y("data-v-f5222219"),e=e(),D(),e))((()=>m("div",{class:"shade"},null,-1))),x={class:"year rotate_box"},$=p({__name:"time-wheel",setup(y){const D=t(["month","date","ampm","hour","minute","second"]),p=a({year:"",monthDeg:0,dateDeg:0,hourDeg:0,minuteDeg:0,secondDeg:0,ampmDeg:0}),$=a({monthList:[],dateList:[],hourList:[],minuteList:[],secondList:[],ampmList:[]}),_=t(0),k=t(!1),w=e=>({transform:`rotate(${p[e]}deg)`,transition:k.value?"transform .5s":"none"}),A=(e,t)=>{const a={month:30,date:360/_.value,hour:D.value.includes("ampm")?30:15,minute:6,second:6,ampm:180},s=420/D.value.length,l=D.value.findIndex((e=>e===t));return{width:`${s}px`,transform:D.value.includes(t)?"hour"!==t?`translate(-50%, -50%) rotate(${e*a[t]}deg) translateX(${l*s+s/2+40}px)`:D.value.includes("ampm")&&e>11?"scale(0)":`translate(-50%, -50%) rotate(${e*a[t]}deg) translateX(${l*s+s/2+40}px)`:"scale(0)"}},F=e=>{const t=["","一","二","三","四","五","六","七","八","九"];return e?e<10?t[e]:e>=10&&e<20?`十${t[e%10]}`:`${t[Math.floor(e/10)]}十${t[e%10]}`:"零"};let S=null;const j=()=>{const e=new Date,t=e.getFullYear(),a=e.getMonth()+1,s=e.getDate(),l=e.getHours(),n=e.getMinutes(),o=e.getSeconds();_.value=new Date(t,a,0).getDate(),p.year=`${t}年`,p.monthDeg=30*-(a-1),p.dateDeg=-(s-1)*(360/_.value),p.hourDeg=D.value.includes("ampm")?-l%12*30:15*-l,p.minuteDeg=6*-n,p.secondDeg=6*-o,p.ampmDeg=180*-~~(l/12);const i=()=>{removeEventListener("transitionend",i),k.value=!1,setTimeout((()=>{30*(a+1)>=360&&(p.monthDeg=360-30*a),(s+1)*(360/_.value)>=360&&(p.dateDeg=360-(s-1)*(360/_.value)),(D.value.includes("ampm")?(l+1)%12*30:15*(l+1))>=360&&(p.hourDeg=360-(D.value.includes("ampm")?-l%12*30:15*-l)),6*(n+1)>=360&&(p.minuteDeg=360-6*n),180*~~((l+1)/12)>=360&&(p.ampmDeg=360-180*~~(l/12)),p.secondDeg=360-6*o,setTimeout((()=>{k.value=!0,S=requestAnimationFrame(j)}),1e3-Date.now()%1e3)}),10)};6*(o+1)>=360?addEventListener("transitionend",i):S=requestAnimationFrame(j)},q=()=>{j(),$.monthList=Array.from({length:12},((e,t)=>`${F(t+1)}月`)),$.dateList=Array.from({length:_.value},((e,t)=>`${F(t+1)}日`)),$.hourList=Array.from({length:24},((e,t)=>`${F(t)}时`)),$.minuteList=Array.from({length:60},((e,t)=>`${F(t)}分`)),$.secondList=Array.from({length:60},((e,t)=>`${F(t)}秒`)),$.ampmList=["上午","下午"],setTimeout((()=>{k.value=!0}),10)};return q(),document.addEventListener("visibilitychange",(e=>{"visible"===e.target.visibilityState?q():"hidden"===e.target.visibilityState&&(k.value=!1,window.cancelAnimationFrame(S))})),(t,a)=>{const y=r("a-checkbox-group"),_=r("a-card"),k=h("calcHeight");return u(),s("div",b,[l(e,{overlayShow:""}),n((u(),o(_,{class:"flow_hidden",title:"时间轮盘",hoverable:!0},{extra:i((()=>[l(y,{value:D.value,"onUpdate:value":a[0]||(a[0]=e=>D.value=e),options:[{label:"月",value:"month"},{label:"日",value:"date"},{label:"上午下午",value:"ampm"},{label:"时",value:"hour"},{label:"分",value:"minute"},{label:"秒",value:"second"}]},null,8,["value"])])),default:i((()=>[m("div",L,[f,m("div",x,[m("div",null,d(p.year),1)]),m("div",{class:"rotate_box",style:v(w("monthDeg"))},[(u(!0),s(c,null,g($.monthList,((e,t)=>(u(),s("div",{key:t,style:v(A(t,"month"))},d(e),5)))),128))],4),m("div",{class:"rotate_box",style:v(w("dateDeg"))},[(u(!0),s(c,null,g($.dateList,((e,t)=>(u(),s("div",{key:t,style:v(A(t,"date"))},d(e),5)))),128))],4),m("div",{class:"rotate_box",style:v(w("ampmDeg"))},[(u(!0),s(c,null,g($.ampmList,((e,t)=>(u(),s("div",{key:t,style:v(A(t,"ampm"))},d(e),5)))),128))],4),m("div",{class:"rotate_box",style:v(w("hourDeg"))},[(u(!0),s(c,null,g($.hourList,((e,t)=>(u(),s("div",{key:t,style:v(A(t,"hour"))},d(e),5)))),128))],4),m("div",{class:"rotate_box",style:v(w("minuteDeg"))},[(u(!0),s(c,null,g($.minuteList,((e,t)=>(u(),s("div",{key:t,style:v(A(t,"minute"))},d(e),5)))),128))],4),m("div",{class:"rotate_box",style:v(w("secondDeg"))},[(u(!0),s(c,null,g($.secondList,((e,t)=>(u(),s("div",{key:t,style:v(A(t,"second"))},d(e),5)))),128))],4)])])),_:1})),[[k,{height:21,dom:".ant-card-body"}]])])}}},[["__scopeId","data-v-f5222219"]]);export{$ as default};
