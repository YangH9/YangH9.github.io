import{B as e}from"./chunk-BZWKAqeX.js";import{r as t,g as a,j as i,b as l,w as n,e as c,a as r,o as u,l as s,_ as o}from"./index-Bx-KHl3S.js";const d={class:"container"},v="30px SanFrancisco",f=o({__name:"picture-in-picture",setup(o){let f={},h="",m="";const p=t(""),g=t(""),x=t(""),y=()=>{const e=(new Date).toFormat(),{width:t,height:a}=f;if(h.clearRect(0,0,t,a),h.fillStyle="#fff",h.fillRect(0,0,t,a),h.fillStyle="#000",h.font=v,h.beginPath(),h.fillText(e,t/2,a/2+10),m!==e){m=e;try{g.value.srcObject=p.value.captureStream()}catch(i){}}window.requestAnimationFrame(y)},_=()=>{if(document.pictureInPictureEnabled&&!g.value.disablePictureInPicture)try{document.pictureInPictureElement&&document.exitPictureInPicture(),g.value.requestPictureInPicture()}catch(e){}};return a((()=>{x.value.style.font=v,x.value.style.padding="14px",x.value.innerHTML="0000/00/00 00:00:00",f=x.value.getBoundingClientRect(),(()=>{const{width:e,height:t}=f;p.value.width=e,p.value.height=t,g.value.width=e,g.value.height=t,h=p.value.getContext("2d"),h.textAlign="center",h.textBaseline="middle",h.lineWidth=5,y()})()})),(t,a)=>{const o=r("a-button"),v=r("a-card");return u(),i("div",d,[l(e,{overlayShow:""}),l(v,{title:"画中画",class:"mb_2",hoverable:!0},{default:n((()=>[c("canvas",{ref_key:"canvas",ref:p},"不支持canvas",512),c("video",{ref_key:"video",ref:g,autoplay:""},null,512),c("div",null,[l(o,{onClick:_},{default:n((()=>[s("开启画中画")])),_:1})])])),_:1}),c("span",{ref_key:"textWidth",ref:x,class:"textWidth"},null,512)])}}},[["__scopeId","data-v-57d577a9"]]);export{f as default};
