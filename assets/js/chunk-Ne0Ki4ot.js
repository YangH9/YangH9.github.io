import{B as e}from"./chunk-BZWKAqeX.js";import{n as a,m as l,p as t,r as n,j as r,b as s,w as i,a as u,i as o,o as d,l as c,a7 as v,F as p,G as m,_ as f}from"./index-Bx-KHl3S.js";import{l as _}from"./chunk-DpEzHKtF.js";const g={class:"container"};function b(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!m(e)}const y="jsonp_appStore",x=f({__name:"app-store",setup(m){var f,x;const w=o("dayjs"),h=o("Jsonp"),k=a(),z=l(),S={entity:{software:{value:"software",label:"IOS"},macSoftware:{value:"macSoftware",label:"MacOS"}},contry:{cn:{value:"cn",label:"中国/CN"},us:{value:"us",label:"美国/US"},jp:{value:"jp",label:"日本/JP"},kr:{value:"kr",label:"韩国/KR"}}},U=t({name:(null==(f=k.query)?void 0:f.term)||"",entity:"software",contry:"cn"}),N=n([]),R=n({}),j=async()=>{z.replace({query:{term:U.name}});const e=await h(`https://itunes.apple.com/search?term=${U.name}&country=${U.contry}&entity=${U.entity}&callback=${y}`,y);N.value=e.results};(null==(x=k.query)?void 0:x.term)&&j();const A=()=>{var e;return s(p,null,[s(u("a-form"),{model:U,"label-col":{span:3}},{default:()=>[s(u("a-row"),{gutter:24},{default:()=>[s(u("a-col"),{span:24},{default:()=>[s(u("a-form-item"),{label:"App名称"},{default:()=>[s(u("a-input"),{value:U.name,"onUpdate:value":e=>U.name=e,placeholder:"App相关信息",onChange:_.debounce(j,1e3)},null)]})]}),s(u("a-col"),{span:24,md:12},{default:()=>[s(u("a-form-item"),{label:"系统","label-col":{span:3,md:6}},{default:()=>[s(u("a-radio-group"),{value:U.entity,"onUpdate:value":e=>U.entity=e,options:Object.values(S.entity),onChange:j},null)]})]}),s(u("a-col"),{span:24,md:12},{default:()=>[s(u("a-form-item"),{label:"地区","label-col":{span:3,md:6}},{default:()=>[s(u("a-radio-group"),{value:U.contry,"onUpdate:value":e=>U.contry=e,options:Object.values(S.contry),onChange:j},null)]})]}),s(u("a-col"),{span:24},{default:()=>[s(u("a-list"),{"item-layout":"vertical","data-source":N.value,renderItem:({item:e})=>s(u("a-list-item"),{class:"px_0",onClick:()=>R.value=e},{default:()=>[s(u("a-list-item-meta"),null,{title:()=>{let a;return s("div",{class:"d_flex items_center wrap"},[s("a",{href:`https://apps.apple.com/cn/app/id${e.trackId}`,title:e.trackName,target:"_blank",class:"text_xl font_bold mr_4 textFlow"},[e.trackName]),s(u("a-tag"),{color:"success"},{default:()=>[e.trackContentRating]}),s(u("a-tag"),{color:"gold"},{default:()=>{var a;return[null==(a=S.entity[e.wrapperType])?void 0:a.label,c("-"),e.primaryGenreName]}}),s(u("a-tag"),null,b(a=v(e.fileSizeBytes))?a:{default:()=>[a]}),s(u("a-tag"),null,{default:()=>[s(u("el-rate"),{modelValue:e.averageUserRating,"onUpdate:modelValue":a=>e.averageUserRating=a,disabled:!0,"show-score":!0,size:"small","score-template":`${e.userRatingCount}`},null)]}),s(u("a-tag"),null,{default:()=>[e.formattedPrice],icon:()=>s(u("APropertySafetyTwoTone"),null,null)}),s(u("a-tag"),null,{default:()=>[e.version],icon:()=>s(u("AInfoCircleTwoTone"),null,null)})])},description:()=>s(p,null,[s("div",{class:"mb_2"},[s("a",{href:`https://apps.apple.com/cn/developer/id${e.artistId}`,title:e.artistName,target:"_blank"},[e.artistName])]),e.genres.map((e=>s(u("a-tag"),{color:"cyan"},b(e)?e:{default:()=>[e]}))),e.advisories.map((e=>s(u("a-tag"),{color:"blue"},b(e)?e:{default:()=>[e]})))]),avatar:()=>s(u("a-avatar"),{shape:"square",size:64,src:e.artworkUrl100},null)}),s("p",{class:"textFlow_2"},[e.description])]})},null)]})]})]}),s(u("a-drawer"),{title:"详情",placement:"bottom",closable:!1,open:!!(null==(e=R.value)?void 0:e.trackId),height:"80vh",class:"drawer",onClose:()=>R.value={}},{default:()=>{var e,a,l,t;return[s(u("a-space"),{size:20},{default:()=>[s(u("a-avatar"),{shape:"square",size:64,src:R.value.artworkUrl100},null),s(u("a-space"),{size:6,direction:"vertical"},{default:()=>[s(u("a-space"),{size:10},{default:()=>[s("div",{class:"text_xl font_bold textFlow"},[R.value.trackName]),s(u("a-tag"),null,{default:()=>[R.value.contentAdvisoryRating]})]}),s(u("a-space"),{size:0},{default:()=>{var e;return[s(u("a-tag"),{color:"blue"},{default:()=>[R.value.formattedPrice],icon:()=>s(u("APropertySafetyTwoTone"),null,null)}),null==(e=R.value.genres)?void 0:e.map((e=>s(u("a-tag"),{color:"cyan"},b(e)?e:{default:()=>[e]})))]}})]})]}),s(u("a-divider"),null,null),s("div",{class:"scroll_x"},[s(u("a-space"),{size:10},{default:()=>[s(u("a-space"),{size:6,align:"center",direction:"vertical"},{default:()=>{var e;return[s("span",{class:"text_no_wrap"},[R.value.userRatingCount,c(" 个评分")]),s(u("el-rate"),{modelValue:R.value.averageUserRating,"onUpdate:modelValue":e=>R.value.averageUserRating=e,disabled:!0,"show-score":!0,size:"small","score-template":""},null),s("span",null,[null==(e=R.value.averageUserRating)?void 0:e.toFixed(2)])]}}),s(u("a-divider"),{type:"vertical"},null),s(u("a-space"),{size:6,align:"center",direction:"vertical"},{default:()=>[s("span",null,[c("开发者")]),s("a",{href:`https://apps.apple.com/cn/developer/id${R.value.artistId}`,title:R.value.artistName,target:"_blank"},[R.value.artistName])]}),s(u("a-divider"),{type:"vertical"},null),s(u("a-space"),{size:6,align:"center",direction:"vertical"},{default:()=>[s("span",null,[c("年龄")]),s("span",{class:"text_xl font_bold"},[R.value.contentAdvisoryRating])]}),s(u("a-divider"),{type:"vertical"},null),s(u("a-space"),{size:6,align:"center",direction:"vertical"},{default:()=>{var e,a,l;return[s("span",null,[c("语言")]),s("span",{class:"text_xl font_bold"},[null==(e=R.value.languageCodesISO2A)?void 0:e[0]]),(null==(a=R.value.languageCodesISO2A)?void 0:a.length)>0?s("span",{class:"text_no_wrap"},[c("+"),null==(l=R.value.languageCodesISO2A)?void 0:l.length,c("种语言")]):""]}}),s(u("a-divider"),{type:"vertical"},null),s(u("a-space"),{size:6,align:"center",direction:"vertical"},{default:()=>[s("span",null,[c("大小")]),s("span",{class:"text_xl font_bold text_no_wrap"},[v(R.value.fileSizeBytes)])]})]})]),s(u("a-divider"),null,null),s("div",null,[s("div",{class:"d_flex content_between mb_2"},[s("div",{class:"text_xl font_bold textFlow"},[c("新内容")])]),s("div",{class:"d_flex content_between mb_1"},[s("div",null,[c("版本："),R.value.version]),s("div",null,[w(R.value.currentVersionReleaseDate).format("YYYY/MM/DD")])]),s("p",{class:"ml_4",innerHTML:null==(e=R.value.releaseNotes)?void 0:e.replaceAll("\n","<br />")},null)]),s(u("a-divider"),null,null),s("p",{class:"px_2",innerHTML:null==(a=R.value.description)?void 0:a.replaceAll("\n","<br />")},null),s(u("a-divider"),null,null),s("div",null,[s("div",{class:"text_xl font_bold textFlow mb_3"},[c("信息")]),s("div",{class:"px_2"},[s("div",{class:"mb_3"},[s("div",null,[c("名称")]),s("div",null,[R.value.trackName])]),s("div",{class:"mb_3"},[s("div",null,[c("供应商")]),s("div",null,[R.value.sellerUrl?s("a",{href:R.value.sellerUrl,title:R.value.sellerName,target:"_blank"},[R.value.sellerName]):R.value.sellerName])]),s("div",{class:"mb_3"},[s("div",null,[c("类别")]),s("div",null,[null==(l=R.value.genres)?void 0:l.map(((e,a)=>{var l;return s("a",{href:` https://itunes.apple.com/cn/genre/id${null==(l=R.value.genreIds)?void 0:l[a]}`,target:"_blank",class:"mr_2"},[e])}))])]),s("div",{class:"mb_3"},[s("div",null,[c("大小")]),s("div",{class:"font_600"},[v(R.value.fileSizeBytes)])]),s("div",{class:"mb_3"},[s("div",null,[c("年龄分级")]),s("div",{class:"font_600"},[R.value.contentAdvisoryRating]),(null==(t=R.value.advisories)?void 0:t.length)>0?s("div",null,[R.value.advisories.map((e=>e))]):""]),s("div",{class:"mb_3"},[s("div",null,[c("价格")]),s("div",{class:"font_600"},[R.value.formattedPrice])]),s("div",{class:"mb_3"},[s("div",null,[c("更新时间")]),s("div",{class:"font_600"},[w(R.value.currentVersionReleaseDate).format("YYYY/MM/DD")])]),s("div",null,[s("div",null,[c("上架时间")]),s("div",{class:"font_600"},[w(R.value.releaseDate).format("YYYY/MM/DD")])])])])]}})])};return(a,l)=>{const t=u("a-card");return d(),r("div",g,[s(e,{overlayShow:""}),s(t,{title:"",hoverable:!0},{default:i((()=>[s(A)])),_:1})])}}},[["__scopeId","data-v-0dae8008"]]);export{x as default};
